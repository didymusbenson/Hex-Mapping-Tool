<!DOCTYPE html>

<head>
    <title>Hex</title>
    <script src="hexagon.js"></script>

    <style>
        input {
            width: 75px;
            text-align: center;
        }
        #HexCanvas{border:1px solid black;}

    </style>
</head>

<body>
    <div id="CANVASHOLDER">

    </div>


    <br>
    <br>
    <button onclick="setColor('blue')">water</button>
    <button onclick="setColor('red')">mountain</button>
    <button onclick="setColor('green')">forest</button>
    <button onclick="setColor('yellow')">plains</button>
    <button onclick="setColor('black')">swamp</button>
    <button onclick="setColor('#eee')">blank</button>
    <br>
    <br>
    <input type="text" id="hw" placeholder="Hex Size">
    <input type="text" id="hr" placeholder="# Rows">
    <input type="text" id="hc" placeholder="# Columns">
    <button onclick="redraw()">NEW MAP</button>
    <br>
    <br>
    <button><a id="download" download="Map.jpg">download as image</a></button>
    <script>


        function download() {
                var dt = document.getElementById("HexCanvas").toDataURL('image/jpeg');
                this.href = dt;
        };

        document.getElementById("download").addEventListener('click', download, false);

        function redraw() {

            var width = Number(document.getElementById("hw").value);
            var rows = Number(document.getElementById("hr").value);
            var cols = Number(document.getElementById("hc").value);

            var stupidMath = ((Math.sqrt(Math.pow(width,2) - Math.pow((width/2),2))) * 2)

            var    heightNeeded = stupidMath * rows + (stupidMath / 2);


            var widthNeeded = cols * (width * 1.5) + width * .5;

            console.log("widthneeded: " + widthNeeded+ ", heightneeded: " + heightNeeded);

            document.getElementById("CANVASHOLDER").innerHTML = "<canvas id='HexCanvas' width='"+ widthNeeded +"' height='"+heightNeeded+"'></canvas>";

            var canvas = document.getElementById("HexCanvas");
            var context = canvas.getContext("2d");
            context.clearRect(0, 0, canvas.width, canvas.height);


            hexagonGrid = new HexagonGrid("HexCanvas", width, rows, cols);
            hexagonGrid.drawHexGrid(rows, cols, 0, 0, false)
            console.log("width: " + width + ", rows: " + rows + ", cols: " + cols);
        }

        function setColor(color) {
            hexagonGrid.setDrawColor(color);
        }



    </script>

</body>
